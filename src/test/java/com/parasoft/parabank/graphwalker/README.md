# GraphWalker tests

## Generating model interfaces

To generate model interfaces, run the generate-test-sources Maven goal in the project
directory: `mvn org.graphwalker:graphwalker-maven-plugin:4.3.2:generate-test-sources`

> [!NOTE]
>
> The generated model interfaces are located in the `target/generated-test-sources/graphwalker/org/graphwalker`
> directory.

If you use an IDE such as IntelliJ IDEA, be sure to flag the above directory as a source directory, this will prevent
compilation errors in the IDE.

## Model implementations

Implementation of the models can be found in the [modelimpl](modelimpl) directory. Each model implementation has an
annotation `@GraphWalker` that specifies e.g. the generator and the start element. Note that only Login has a start
element, since this means combined tests will use the Login model as the starting point. The generator and stop
condition used by default is the "Default" option, which is defined in the [Coverage](utils/Coverage.java) class.
You can change the Default to another, or use another directly in the model implementation, in case you want to use
another generator and stop condition. New ones can be defined following the same pattern.

## Running the tests

To run the tests, one can execute the tests in the `com.parasoft.parabank.graphwalker` package, in
[GraphWalkerIT](GraphWalkerIT.java).

Tests will also be executed automatically during the build / install phase of the Maven build.

Note that if manually running a single test, you need to have first set up the Docker container for ParaBank, as per
the top-level README.md file. During build / install, a temporary server is set up for testing, but due to time
constraints, this was not added to the GraphWalker tests.

## In case of issues

If you encounter issues during install, where the GraphWalker tests are failing, it is recommended to temporarily
disable them, or set the Default generator & coverage to a low coverage percentage. There have been some issues with
QuickRandom resulting in infinite loops, which is why Random is used by default. DirectedChinesePostman can only be
run on a fully connected graph, which is impossible for the smaller subset tests, which only have parts of the entire
model available.

## Benchmarking

An integration test setup for benchmarking is available in [GraphWalkerBenchmarkIT](GraphWalkerBenchmarkIT.java). This
test will execute paths generated by a GraphWalker benchmark command's output, and generate result files which include
test execution time.

To set this up, you will need to edit the `BENCHMARK_PATH` variable in the class to point to the benchmark directory.
Other variables are available for customisation, such as capping the number of tests to run, or whether the tests should
be run headless.